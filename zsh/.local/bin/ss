#!/usr/bin/env zsh

# tmux attach script: ta

t="${1-server}" # default value: "server"

typeset -A repos=(
  [min]="$HOME/repos/minnesoda/min"
  [sun-app]="$HOME/sunnus/app/dev"
)

repo=$(for i in ${(k)repos}; do
  echo $i
done | fzf $FZF_OPTS --header="Pick a repo to start a server from")

[[ -z $repo ]] \
  && echo "No repo selected. Quitting." \
  && return 0

echo $repo
# repo=$(fzf)

# function tmux_new() {
#   local s=$start_dir[$t]
#   [ $s ] && c=$s || c=$HOME
#   tmux new-session -d -s $t -c $c -n server
# }
#
# if [ -z "$TMUX" ]; then # when outside of tmux
#   if ! tmux has-session -t "$t" 2>/dev/null; then
#     # if session doesn't exist, create it
#     tmux_new
#   fi
#   tmux attach -t $t:server; return
# else # when inside of tmux
#   if ! tmux has-session -t $t 2>/dev/null; then
#     # if target doesn't exist,
#     # just start a new session first
#     tmux_new
#   fi
#   tmux switch-client -t $t:server; return
# fi

#!/usr/bin/env zsh

case $1 in
  "--pi")
    local dots=(nvim vim zsh)
    local root=()
    local submodules=(personal pi);;
  *)
    local dots=(tmux nvim term vim xbar zsh)
    local root=(root)
    local submodules=(personal);;
esac

setopt nullglob
local clear_list=(
  $HOME/.zsh*
  $HOME/.zprofile
)

local stow_folders=($dots $submodules)

for folder in ${stow_folders}; do
  stow --restow \
    --override=.ssh \
    --override=.config/zsh/prompt \
    --override=.config/zsh/nav \
    --override=.zshrc \
    --target=$HOME $folder
done

for folder in ${root}; do
  sudo stow --restow \
    --target=/ $folder
done

for file in ${clear_list}; do
  rm -rf $file
done
